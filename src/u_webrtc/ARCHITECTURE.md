# u_webrtc æ¶æ„è¯´æ˜

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ROS2 ç¯å¢ƒ                                    â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚  â”‚  ç›¸æœº/å›¾åƒæº    â”‚                                                  â”‚
â”‚  â”‚  (usb_camç­‰)   â”‚                                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â”‚           â”‚                                                           â”‚
â”‚           â–¼                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      /camera/image_raw                      â”‚
â”‚  â”‚  sensor_msgs/msg   â”‚      (Image Topic)                          â”‚
â”‚  â”‚      Image         â”‚                                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚           â”‚                                                           â”‚
â”‚           â–¼                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚           u_webrtc Node (C++)                            â”‚        â”‚
â”‚  â”‚                                                          â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚        â”‚
â”‚  â”‚  â”‚  ImageSubscriber                                â”‚   â”‚        â”‚
â”‚  â”‚  â”‚  - è®¢é˜… Image è¯é¢˜                               â”‚   â”‚        â”‚
â”‚  â”‚  â”‚  - SensorDataQoS                                â”‚   â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚        â”‚
â”‚  â”‚                     â”‚                                    â”‚        â”‚
â”‚  â”‚                     â–¼                                    â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚        â”‚
â”‚  â”‚  â”‚  ImageConverter                                 â”‚   â”‚        â”‚
â”‚  â”‚  â”‚  - ROS Image â†’ OpenCV Mat                       â”‚   â”‚        â”‚
â”‚  â”‚  â”‚  - BGR/BGRA/Gray â†’ I420                         â”‚   â”‚        â”‚
â”‚  â”‚  â”‚  - cv_bridge                                    â”‚   â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚        â”‚
â”‚  â”‚                     â”‚                                    â”‚        â”‚
â”‚  â”‚                     â–¼                                    â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚        â”‚
â”‚  â”‚  â”‚  VideoEncoder (VP8)                             â”‚   â”‚        â”‚
â”‚  â”‚  â”‚  - I420 â†’ VP8 ç¼–ç                                â”‚   â”‚        â”‚
â”‚  â”‚  â”‚  - å…³é”®å¸§æ§åˆ¶                                     â”‚   â”‚        â”‚
â”‚  â”‚  â”‚  - æ¯”ç‰¹ç‡æ§åˆ¶                                     â”‚   â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚        â”‚
â”‚  â”‚                     â”‚                                    â”‚        â”‚
â”‚  â”‚                     â–¼                                    â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚        â”‚
â”‚  â”‚  â”‚  WebRTCStreamer                                 â”‚   â”‚        â”‚
â”‚  â”‚  â”‚  - æ ¸å¿ƒæµç®¡ç†                                     â”‚   â”‚        â”‚
â”‚  â”‚  â”‚  - æ¨¡å—åè°ƒ                                       â”‚   â”‚        â”‚
â”‚  â”‚  â”‚  - çŠ¶æ€ç®¡ç†                                       â”‚   â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚        â”‚
â”‚  â”‚          â”‚                      â”‚                        â”‚        â”‚
â”‚  â”‚          â–¼                      â–¼                        â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚        â”‚
â”‚  â”‚  â”‚ Signaling    â”‚      â”‚ PeerConnection       â”‚         â”‚        â”‚
â”‚  â”‚  â”‚ Client       â”‚      â”‚ Wrapper              â”‚         â”‚        â”‚
â”‚  â”‚  â”‚              â”‚      â”‚                      â”‚         â”‚        â”‚
â”‚  â”‚  â”‚ - WebSocket  â”‚      â”‚ - ICE åå•†            â”‚         â”‚        â”‚
â”‚  â”‚  â”‚ - SDP äº¤æ¢    â”‚      â”‚ - åª’ä½“ä¼ è¾“            â”‚         â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚        â”‚
â”‚  â”‚         â”‚                        â”‚                       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚            â”‚                        â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                        â”‚
             â”‚ WebSocket              â”‚ WebRTC (DTLS/SRTP)
             â–¼                        â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
    â”‚  Signaling Server  â”‚            â”‚
    â”‚  (Python)          â”‚            â”‚
    â”‚                    â”‚            â”‚
    â”‚  - WebSocket ä¸­è½¬   â”‚            â”‚
    â”‚  - æ¶ˆæ¯è·¯ç”±         â”‚            â”‚
    â”‚  - å¤šå®¢æˆ·ç«¯ç®¡ç†      â”‚            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
             â”‚                        â”‚
             â”‚ WebSocket              â”‚
             â–¼                        â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
    â”‚  Web Client        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚  (HTML5/JS)        â”‚
    â”‚                    â”‚
    â”‚  - RTCPeerConn     â”‚
    â”‚  - è§†é¢‘æ’­æ”¾å™¨       â”‚
    â”‚  - æ§åˆ¶ç•Œé¢         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ æ¨¡å—ä¾èµ–å…³ç³»

```
main.cpp
  â”‚
  â”œâ”€â–º ConfigManager (é…ç½®åŠ è½½)
  â”‚
  â”œâ”€â–º ImageSubscriber (ROS2 è®¢é˜…)
  â”‚     â”‚
  â”‚     â””â”€â–º sensor_msgs, rclcpp
  â”‚
  â”œâ”€â–º ImageConverter (æ ¼å¼è½¬æ¢)
  â”‚     â”‚
  â”‚     â””â”€â–º OpenCV, cv_bridge
  â”‚
  â””â”€â–º WebRTCStreamer (æµç®¡ç†)
        â”‚
        â”œâ”€â–º VideoEncoder (ç¼–ç )
        â”‚     â”‚
        â”‚     â””â”€â–º libvpx (éœ€é›†æˆ)
        â”‚
        â”œâ”€â–º SignalingClient (ä¿¡ä»¤)
        â”‚     â”‚
        â”‚     â””â”€â–º WebSocket åº“ (éœ€é›†æˆ)
        â”‚
        â””â”€â–º PeerConnectionWrapper (è¿æ¥)
              â”‚
              â””â”€â–º libwebrtc/libdatachannel (éœ€é›†æˆ)
```

## ğŸ”„ æ•°æ®æµ

### 1. åˆå§‹åŒ–æµç¨‹

```
å¯åŠ¨èŠ‚ç‚¹
  â”‚
  â”œâ”€â–º åŠ è½½é…ç½®å‚æ•°
  â”‚
  â”œâ”€â–º åˆ›å»º ImageSubscriber
  â”‚
  â”œâ”€â–º åˆ›å»º ImageConverter
  â”‚
  â”œâ”€â–º åˆ›å»º WebRTCStreamer
  â”‚     â”‚
  â”‚     â”œâ”€â–º åˆå§‹åŒ– VideoEncoder
  â”‚     â”‚
  â”‚     â”œâ”€â–º åˆå§‹åŒ– PeerConnection
  â”‚     â”‚
  â”‚     â””â”€â–º åˆå§‹åŒ– SignalingClient
  â”‚
  â””â”€â–º è¿æ¥åˆ°ä¿¡ä»¤æœåŠ¡å™¨
        â”‚
        â””â”€â–º åˆ›å»ºå¹¶å‘é€ Offer
```

### 2. å›¾åƒå¤„ç†æµç¨‹

```
ROS2 Image æ¶ˆæ¯
  â”‚
  â–¼
ImageSubscriber::imageCallback()
  â”‚
  â–¼
ImageConverter::convertToWebRTCFormat()
  â”‚
  â”œâ”€â–º rosImageToMat() - ROS â†’ OpenCV
  â”‚
  â””â”€â–º convertToI420() - æ ¼å¼è½¬æ¢
        â”‚
        â–¼
WebRTCStreamer::pushFrame()
  â”‚
  â–¼
VideoEncoder::encode()
  â”‚
  â–¼
PeerConnection::sendEncodedFrame()
  â”‚
  â””â”€â–º é€šè¿‡ WebRTC å‘é€
```

### 3. ä¿¡ä»¤æµç¨‹

```
ROS2 èŠ‚ç‚¹                ä¿¡ä»¤æœåŠ¡å™¨              Web å®¢æˆ·ç«¯
    â”‚                        â”‚                      â”‚
    â”œâ”€â”€â”€ Offer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                      â”‚
    â”‚                        â”œâ”€â”€â”€â”€â”€ Offer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
    â”‚                        â”‚                      â”‚
    â”‚                        â—„â”€â”€â”€â”€â”€ Answer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â—„â”€â”€â”€ Answer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
    â”‚                        â”‚                      â”‚
    â”œâ”€â”€â”€ ICE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                      â”‚
    â”‚                        â”œâ”€â”€â”€â”€â”€ ICE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
    â”‚                        â”‚                      â”‚
    â”‚                        â—„â”€â”€â”€â”€â”€ ICE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â—„â”€â”€â”€ ICE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
    â”‚                        â”‚                      â”‚
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• WebRTC P2P è¿æ¥ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
```

## ğŸ¨ ç±»è®¾è®¡å›¾

### WebRTCStreamerï¼ˆæ ¸å¿ƒç±»ï¼‰

```cpp
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         WebRTCStreamer                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - _peerConnection                       â”‚
â”‚ - _signalingClient                      â”‚
â”‚ - _videoEncoder                         â”‚
â”‚ - _config                               â”‚
â”‚ - _isConnected                          â”‚
â”‚ - _isInitialized                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + initialize()                          â”‚
â”‚ + pushFrame()                           â”‚
â”‚ + connectToSignalingServer()            â”‚
â”‚ + createOffer()                         â”‚
â”‚ + handleAnswer()                        â”‚
â”‚ + addIceCandidate()                     â”‚
â”‚ - onIceCandidate()                      â”‚
â”‚ - onConnectionStateChange()             â”‚
â”‚ - handleSignalingMessage()              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚           â”‚           â”‚
         â”‚           â”‚           â”‚
         â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚PeerConn     â”‚ â”‚Signaling   â”‚ â”‚VideoEncoder  â”‚
â”‚Wrapper      â”‚ â”‚Client      â”‚ â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”Œ æ¥å£è®¾è®¡

### 1. ImageConverter æ¥å£

```cpp
Input:  sensor_msgs::msg::Image::SharedPtr
Output: ConvertedFrame {
    std::vector<uint8_t> data;  // I420 æ ¼å¼
    int width;
    int height;
    std::string format;
}
```

### 2. VideoEncoder æ¥å£

```cpp
Input:  const uint8_t* frameData, int width, int height
Output: EncodedFrame {
    std::vector<uint8_t> data;  // ç¼–ç åçš„æ•°æ®
    bool isKeyFrame;
    int64_t timestamp;
}
```

### 3. SignalingClient æ¥å£

```cpp
Methods:
    - sendOffer(const std::string& sdp)
    - sendAnswer(const std::string& sdp)
    - sendIceCandidate(const std::string& candidate)
    - onMessage(MessageCallback callback)

Message Format: JSON
{
    "type": "offer|answer|candidate",
    "sdp": "...",
    "candidate": "..."
}
```

## ğŸ”’ çº¿ç¨‹å®‰å…¨è®¾è®¡

```
ä¸»çº¿ç¨‹ (ROS2 Executor)
  â”‚
  â”œâ”€â–º ImageSubscriber Callback
  â”‚     â”‚
  â”‚     â””â”€â–º ImageConverter (æ— çŠ¶æ€ï¼Œçº¿ç¨‹å®‰å…¨)
  â”‚           â”‚
  â”‚           â””â”€â–º WebRTCStreamer::pushFrame()
  â”‚                 â”‚
  â”‚                 â””â”€â–º ä½¿ç”¨ atomic æ ‡å¿—
  â”‚
  â””â”€â–º å®šæ—¶å™¨ Callback
        â”‚
        â””â”€â–º çŠ¶æ€æ£€æŸ¥ (ä½¿ç”¨ atomic)

ç¼–ç çº¿ç¨‹æ±  (å¯é€‰)
  â”‚
  â””â”€â–º VideoEncoder::encode()
```

## ğŸ“Š é…ç½®å‚æ•°æµ

```
webrtc_config.yaml
  â”‚
  â–¼
ConfigManager::declareParameters()
  â”‚
  â–¼
ROS2 å‚æ•°æœåŠ¡å™¨
  â”‚
  â–¼
ConfigManager::loadFromNode()
  â”‚
  â–¼
å„æ¨¡å—é…ç½®ç»“æ„ä½“
  â”‚
  â”œâ”€â–º StreamConfig
  â”œâ”€â–º EncoderConfig
  â””â”€â–º PeerConnectionConfig
```

## ğŸš¦ çŠ¶æ€æœº

### WebRTC è¿æ¥çŠ¶æ€

```
    [æœªåˆå§‹åŒ–]
         â”‚
         â–¼
    initialize()
         â”‚
         â–¼
    [å·²åˆå§‹åŒ–]
         â”‚
         â–¼
    connectToSignalingServer()
         â”‚
         â–¼
    [ä¿¡ä»¤è¿æ¥ä¸­]
         â”‚
         â–¼
    createOffer()
         â”‚
         â–¼
    [ç­‰å¾… Answer]
         â”‚
         â–¼
    handleAnswer()
         â”‚
         â–¼
    [ICE åå•†ä¸­]
         â”‚
         â–¼
    [å·²è¿æ¥] â†â”€â”€â”
         â”‚      â”‚
         â”‚      â”‚ pushFrame()
         â””â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    disconnect()
         â”‚
         â–¼
    [å·²æ–­å¼€]
```

## ğŸ”§ æ‰©å±•ç‚¹

### 1. æ·»åŠ æ–°ç¼–ç å™¨

```cpp
class H264Encoder : public VideoEncoder {
public:
    H264Encoder(const EncoderConfig& config);
    bool initialize() override;
    std::optional<EncodedFrame> encode(...) override;
    void requestKeyFrame() override;
};
```

### 2. æ·»åŠ éŸ³é¢‘æ”¯æŒ

```cpp
class AudioStreamer {
    // ç±»ä¼¼ WebRTCStreamer çš„è®¾è®¡
};
```

### 3. å¤šå®¢æˆ·ç«¯æ”¯æŒ

```cpp
class MultiClientStreamer {
    std::map<ClientId, std::unique_ptr<WebRTCStreamer>> _clients;
    // å¹¿æ’­åˆ°å¤šä¸ªå®¢æˆ·ç«¯
};
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–ç‚¹

1. **é›¶æ‹·è´ä¼˜åŒ–**
   - ä½¿ç”¨ `std::move` ä¼ é€’å¤§æ•°æ®
   - é¿å…ä¸å¿…è¦çš„å†…å­˜æ‹·è´

2. **å¹¶è¡Œå¤„ç†**
   - ç¼–ç çº¿ç¨‹æ± 
   - å¼‚æ­¥ä¿¡ä»¤å¤„ç†

3. **ç¼“å†²ç®¡ç†**
   - ç¯å½¢ç¼“å†²åŒº
   - å¸§ä¸¢å¼ƒç­–ç•¥

4. **ç¡¬ä»¶åŠ é€Ÿ**
   - NVENC (NVIDIA)
   - VAAPI (Intel)
   - ç¡¬ä»¶è§£ç 

## ğŸ¯ è®¾è®¡åŸåˆ™

1. **å•ä¸€èŒè´£åŸåˆ™** - æ¯ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
2. **å¼€é—­åŸåˆ™** - æ˜“äºæ‰©å±•ï¼Œä¸æ˜“ä¿®æ”¹
3. **ä¾èµ–å€’ç½®** - ä¾èµ–æŠ½è±¡è€Œéå®ç°
4. **æ¥å£éš”ç¦»** - æ¥å£æœ€å°åŒ–
5. **RAII** - èµ„æºè‡ªåŠ¨ç®¡ç†

---

è¿™ä¸ªæ¶æ„è®¾è®¡ç¡®ä¿äº†ç³»ç»Ÿçš„**å¯ç»´æŠ¤æ€§**ã€**å¯æ‰©å±•æ€§**å’Œ**é«˜æ€§èƒ½**ã€‚



